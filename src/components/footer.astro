---
import { getCollection } from 'astro:content';
import GitHubIcon from './icons/GitHubIcon.astro';
import TwitterIcon from './icons/TwitterIcon.astro';

interface Props {
  currentPath?: string;
}

const { currentPath = '' } = Astro.props;
const isHomepage = currentPath === '/' || currentPath === '';

const categories = await getCollection('categories');
const currentYear = new Date().getFullYear();
---

<footer class="bg-neutral-50 dark:bg-neutral-950/20 mt-16 shadow-[0_0_0_1px_rgba(0,0,0,0.1)_inset,0_0.5px_0.5px_rgba(0,0,0,0.05)_inset,0_-0.5px_0.5px_rgba(0,0,0,0.05)_inset,0_1px_2px_rgba(0,0,0,0.1)] dark:shadow-[0_0_0_0.5px_rgba(255,255,255,0.06)_inset,0_0.5px_0.5px_rgba(255,255,255,0.1)_inset,0_-0.5px_0.5px_rgba(255,255,255,0.1)_inset,0_0.5px_1px_rgba(0,0,0,0.3),0_1px_2px_rgba(0,0,0,0.4)]">
  <div class="container mx-auto px-4 py-6">
    <div class="flex flex-col items-center gap-4">
      {!isHomepage && (
        <nav aria-label="Footer categories">
          <div class="flex flex-wrap gap-x-4 gap-y-2 justify-center text-xs text-neutral-500 dark:text-neutral-500">
            <a
              href="/"
              class="hover:text-neutral-900 dark:hover:text-neutral-300 transition-colors"
            >
              All
            </a>
            {categories.map((category) => (
              <a
                href={`/category/${category.data.categorySlug}/`}
                class="hover:text-neutral-900 dark:hover:text-neutral-300 transition-colors"
              >
                {category.data.title}
              </a>
            ))}
          </div>
        </nav>
      )}
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4 text-xs text-neutral-500 dark:text-neutral-500">
        <span>Â© {currentYear} AI Resources</span>
        <div class="flex items-center gap-4">
          <a
            href="https://github.com/catalinpit"
            target="_blank"
            rel="noopener noreferrer"
            class="hover:text-neutral-900 dark:hover:text-neutral-300 transition-colors"
            aria-label="GitHub"
          >
            <GitHubIcon class="w-4 h-4" />
          </a>
          <a
            href="https://x.com/catalinmpit"
            target="_blank"
            rel="noopener noreferrer"
            class="hover:text-neutral-900 dark:hover:text-neutral-300 transition-colors"
            aria-label="X (Twitter)"
          >
            <TwitterIcon class="w-4 h-4" />
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>
